<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sudoku</title>
    <style>
        body { font-family: Arial, sans-serif; display: flex; flex-direction: column; padding: 0; background: #222; color: #fff; height: 100vh; overflow: hidden; margin: 0; }
        nav {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 10px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-shrink: 0;
        }
        nav a {
            color: white;
            text-decoration: none;
            margin: 0 10px;
            font-size: 16px;
            transition: opacity 0.3s;
        }
        nav a:hover { opacity: 0.7; }
        .logo { font-size: 20px; font-weight: bold; color: white; }
        .game-container { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; overflow: hidden; }
        h1 { margin: 10px 0; font-size: 32px; }
        #game { display: flex; gap: 30px; align-items: center; }
        #grid { display: grid; grid-template-columns: repeat(9, 44px); gap: 0; border: 3px solid #fff; width: fit-content; background: #fff; box-shadow: 0 0 20px rgba(255,255,255,0.3); }
        .cell { width: 44px; height: 44px; border: 1px solid #ccc; text-align: center; font-size: 18px; color: #000; background: #fff; }
        .cell:nth-child(3n):not(:nth-child(9n)) { border-right: 2px solid #000; }
        .cell:nth-child(n+19):nth-child(-n+27), .cell:nth-child(n+46):nth-child(-n+54) { border-bottom: 2px solid #000; }
        .cell.fixed { background: #e0e0e0; font-weight: bold; }
        .cell:not(.fixed) { cursor: pointer; }
        .cell:not(.fixed):focus { background: #ffffcc; outline: 2px solid #4CAF50; }
        #dashboard { 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            border-radius: 15px;
            min-width: 220px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }
        #timer { 
            font-size: 20px; 
            margin-bottom: 15px;
            padding: 12px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            text-align: center;
        }
        button { 
            width: 100%;
            padding: 12px;
            font-size: 16px;
            cursor: pointer;
            margin-bottom: 10px;
            border: none;
            border-radius: 8px;
            background: #fff;
            color: #667eea;
            font-weight: bold;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        button:hover { transform: translateY(-2px); box-shadow: 0 4px 10px rgba(0,0,0,0.3); }
        .popup { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); justify-content: center; align-items: center; }
        .popup-content { background: white; padding: 30px; border-radius: 10px; text-align: center; box-shadow: 0 4px 6px rgba(0,0,0,0.3); }
        .popup-content h2 { margin: 0 0 20px 0; color: #667eea; }
        .popup-content button { margin-top: 20px; }
    </style>
</head>
<body>
    <nav>
        <div class="logo">ðŸŽ® Imran's Game Zone</div>
        <div>
            <a href="index.html">Home</a>
            <a href="docs.html">Documentation</a>
        </div>
    </nav>
    
    <div class="game-container">
        <h1>Sudoku</h1>
        <div id="game">
            <div id="dashboard">
                <div id="timer">Time: <span id="time">00:00</span></div>
                <button onclick="newGame()">New Game</button>
                <button id="pauseBtn" onclick="togglePause()">Pause</button>
                <button onclick="checkSolution()">Check</button>
                <button onclick="location.href='index.html'">Back to Menu</button>
            </div>
            <div id="grid"></div>
        </div>
    </div>
    <div id="popup" class="popup">
        <div class="popup-content">
            <h2 id="popup-title"></h2>
            <p id="popup-message"></p>
            <button onclick="closePopup()">OK</button>
        </div>
    </div>
    <script>
        let startTime, timerInterval, isPaused = false;

        function startTimer() {
            startTime = Date.now() - (parseInt(localStorage.getItem('elapsed') || 0) * 1000);
            timerInterval = setInterval(() => {
                const elapsed = Math.floor((Date.now() - startTime) / 1000);
                localStorage.setItem('elapsed', elapsed);
                const mins = Math.floor(elapsed / 60).toString().padStart(2, '0');
                const secs = (elapsed % 60).toString().padStart(2, '0');
                document.getElementById('time').textContent = `${mins}:${secs}`;
            }, 1000);
        }

        function stopTimer() {
            clearInterval(timerInterval);
        }

        function togglePause() {
            const btn = document.getElementById('pauseBtn');
            if (isPaused) {
                startTimer();
                btn.textContent = 'Pause';
                document.querySelectorAll('.cell:not(.fixed)').forEach(cell => cell.disabled = false);
            } else {
                stopTimer();
                btn.textContent = 'Resume';
                document.querySelectorAll('.cell:not(.fixed)').forEach(cell => cell.disabled = true);
            }
            isPaused = !isPaused;
        }

        const puzzle = [
            [5,3,0,0,7,0,0,0,0],
            [6,0,0,1,9,5,0,0,0],
            [0,9,8,0,0,0,0,6,0],
            [8,0,0,0,6,0,0,0,3],
            [4,0,0,8,0,3,0,0,1],
            [7,0,0,0,2,0,0,0,6],
            [0,6,0,0,0,0,2,8,0],
            [0,0,0,4,1,9,0,0,5],
            [0,0,0,0,8,0,0,7,9]
        ];
        
        const solution = [
            [5,3,4,6,7,8,9,1,2],
            [6,7,2,1,9,5,3,4,8],
            [1,9,8,3,4,2,5,6,7],
            [8,5,9,7,6,1,4,2,3],
            [4,2,6,8,5,3,7,9,1],
            [7,1,3,9,2,4,8,5,6],
            [9,6,1,5,3,7,2,8,4],
            [2,8,7,4,1,9,6,3,5],
            [3,4,5,2,8,6,1,7,9]
        ];

        function createGrid() {
            const grid = document.getElementById('grid');
            grid.innerHTML = '';
            const saved = JSON.parse(localStorage.getItem('gameState') || '{}');
            
            for (let i = 0; i < 9; i++) {
                for (let j = 0; j < 9; j++) {
                    const input = document.createElement('input');
                    input.className = 'cell';
                    input.type = 'text';
                    input.maxLength = 1;
                    input.dataset.row = i;
                    input.dataset.col = j;
                    
                    if (puzzle[i][j] !== 0) {
                        input.value = puzzle[i][j];
                        input.classList.add('fixed');
                        input.readOnly = true;
                    } else {
                        const savedVal = saved[`${i}-${j}`];
                        if (savedVal) input.value = savedVal;
                        input.addEventListener('input', e => {
                            e.target.value = e.target.value.replace(/[^1-9]/g, '');
                            saveGameState();
                        });
                    }
                    grid.appendChild(input);
                }
            }
        }

        function saveGameState() {
            const state = {};
            document.querySelectorAll('.cell:not(.fixed)').forEach(cell => {
                if (cell.value) {
                    state[`${cell.dataset.row}-${cell.dataset.col}`] = cell.value;
                }
            });
            localStorage.setItem('gameState', JSON.stringify(state));
        }

        function checkSolution() {
            stopTimer();
            const cells = document.querySelectorAll('.cell:not(.fixed)');
            let correct = true;
            cells.forEach(cell => {
                const row = parseInt(cell.dataset.row);
                const col = parseInt(cell.dataset.col);
                const val = parseInt(cell.value);
                if (!val || val !== solution[row][col]) {
                    correct = false;
                    cell.style.background = '#ffcccc';
                } else {
                    cell.style.background = '#ccffcc';
                }
            });
            
            if (correct) {
                showPopup('Congratulations!', 'You have won the game!');
            } else {
                showPopup('Unfortunately', 'You have failed the game.');
                startTimer();
            }
        }

        function showPopup(title, message) {
            document.getElementById('popup-title').textContent = title;
            document.getElementById('popup-message').textContent = message;
            document.getElementById('popup').style.display = 'flex';
        }

        function closePopup() {
            document.getElementById('popup').style.display = 'none';
        }

        function newGame() {
            stopTimer();
            isPaused = false;
            document.getElementById('pauseBtn').textContent = 'Pause';
            localStorage.removeItem('gameState');
            localStorage.removeItem('elapsed');
            document.getElementById('time').textContent = '00:00';
            createGrid();
            startTimer();
        }

        createGrid();
        startTimer();
    </script>
</body>
</html>
